name: Free VPS with Cloudflare Tunnel

on:
  workflow_dispatch:  # ‡∏Å‡∏î‡∏£‡∏±‡∏ô‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ
  schedule:
    - cron: "0 */6 * * *"  # ‡∏£‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å 6 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Install Cloudflare Tunnel
        run: |
          curl -fsSL https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o cloudflared
          chmod +x cloudflared
          sudo mv cloudflared /usr/local/bin

      - name: Start VPS with Cloudflare Tunnel
        run: |
          nohup cloudflared tunnel --url ssh://localhost:22 --no-autoupdate &  
          sudo apt update && sudo apt install -y openssh-server
          sudo service ssh start
          echo "root:password" | sudo chpasswd
          echo "üî• VPS Running! Connect using: 'ssh root@your-domain.com -p 22'"
